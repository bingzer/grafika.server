<div ng-if="!vm.animation" layout-margin layout-align="center center">
    <gf-spinner></gf-spinner>
</div>
<div class="detail" layout="column" ng-if="vm.animation">
    <div ng-include="'/app/animation/playback.html'"></div>
    
    <md-divider></md-divider>

    <div layout="column" layout-margin>
        <div layout="row" layout-xs="column">
            <!-- Left -->
            <div layout="column">
                <div class="md-title">
                    <md-icon md-font-library="material-icons" ng-if="!vm.animation.isPublic">lock_outline</md-icon>
                    {{vm.animation.name}}
                </div>
                <div>
                    <div class="md-caption text-muted">{{vm.animation.width + 'x' + vm.animation.height}} px&nbsp;&middot;&nbsp;{{vm.animation.totalFrame}} frames&nbsp;&middot;&nbsp;{{ vm.animation.views + ' views' }}</div>
                    <div class="md-caption text-muted">Published on {{vm.animation.dateCreated | date}}&nbsp;&middot&nbsp;Last modified on {{vm.animation.dateModified | date}}</div>
                </div>
            </div>
            <div flex></div>
            <!-- Right -->
            <div layout="column" layout-xs="row" layout-wrap layout-align="end end">
                <avatar user-id="{{vm.animation.userId}}" username="{{vm.animation.author || 'anonymous'}}" flex-xs="45"></avatar>
                <rating-stars class="text-align-end" animation-id="{{vm.animation._id}}" rating="{{vm.animation.rating}}" flex-xs="45"></rating-stars>
                <div layout="row" ng-if="vm.canEdit" style="margin-top: 4px" flex-xs="90" layout-align-xs="center">
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="button" class="font-smaller btn btn-default" ng-click="vm.edit()">Edit</button>
                        <button type="button" class="font-smaller btn btn-default" ng-click="vm.editData()">Properties</button>
                        <button type="button" class="font-smaller btn btn-danger" ng-click="vm.delete()">Delete</button>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <p class="md-caption" ng-show="vm.animation.description != undefined && vm.animation.description.length > 0">{{vm.animation.description}}</p>
            <p class="md-caption text-muted" ng-show="vm.animation.description == undefined || vm.animation.description.length == 0">No description</p>
        </div>
        <div layout="row">
            <div fb-like="vm.sharing.url"></div>
            &nbsp;
            <div tweet="vm.sharing.name" tweet-url="vm.sharing.url"></div>
            &nbsp;
            <div google-plus="vm.sharing.url"></div>
        </div>
    </div>
    
    <md-divider></md-divider>
    <!-- related animations -->
    <div class="related-animations-container" layout-margin>
        <span class="md-caption text-muted" style="font-weight: 500">RELATED</span>
        <gf-spinner ng-show="vm.isLoadingRelatedAnimations"></gf-spinner>
        <div ng-show="!vm.isLoadingRelatedAnimations" class="related-animations" layout-align="center center" layout="row" layout-wrap>
            <ng-include src="'/app/animation/card-small.html'" ng-repeat="anim in vm.relatedAnimations | limitTo: vm.relatedAnimationsLimit" >
            </ng-include>
        </div>
    </div>
    
    <md-divider></md-divider>

    <dir-disqus config="vm.disqusConfig" ng-if="vm.disqusReady" layout-margin></dir-disqus>
    
    <gf-adsense></gf-adsense>
</div>